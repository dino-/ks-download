## What can fail throughout the process?

Trying to clean-up the error reporting

- downloading and parsing the inspection data
- call to Geocoding
- creation of name words (can this fail? But we do need to see it)
- call to Places
- attempt to match ins facility with one of the Places locations


## log levels

This info can go into the conf file when we get there.

DEBUG       - very fine debug info
INFO        - less fine debug info
NOTICE      - normal runtime info
WARNING
ERROR       - non-fatal runtime errors, missing lookups for example
CRITICAL
ALERT
EMERGENCY   - fatal runtime errors


## 2014-12-30

* Need to decide on how to parse JSON from the two sources (Google GEOCODE API and Google Places API). The choices are:
   * Make data types fully expressing the JSON and auto-derive
   * Use custom instancing, Applicative and the Aeson functions like (.:)


## 2014-12-29
correlating inspection data with location data

* go through all JSON from health inspections (in data/)
* for each "location", hit GEO CODE API
* get back doc with lat/lng in "geometry" "location"
* pass lat/lng to Places API (REST). radius 50, types restaurant (see below)
* interested in locations with Name match and Vicinity close match
* in those, interested in geometry location and place_id

Address (from our database) 
    "location": "4121 NEW BERN AVE STE 109 RALEIGH, NC 27610"

Geocoder API 
- they call this a 'forward lookup'
- given a postal address return the geolocation

    https://maps.googleapis.com/maps/api/geocode/json?address=3D4121%20NEW%20BERN%20AVE%20STE%20109%20RALEIGH,%20NC%2027610

    "geometry" : {
            "location" : {
               "lat" : 35.8016467,
               "lng" : -78.5653275
            },


Places API: 
- use the lat & lng returned by Geolocator to find the restaurant

    https://maps.googleapis.com/maps/api/place/nearbysearch/json?key=APIKEYGOESHERE&location=3D35.8016467,-78.5653275&radius=3D50&types=3Drestaurant


* match names 
* match location (from our data) to 'vicinity' (Places data)
* note the 'score' for the string compare using your algorithm
* note the place_id and geometry from the Places API results


## first notes

Starting form is here: http://wake.digitalhealthdepartment.com/reports.cfm
